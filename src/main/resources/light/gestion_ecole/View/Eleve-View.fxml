<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<?import javafx.geometry.Insets?>
<?import javafx.collections.FXCollections?>
<BorderPane xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="light.gestion_ecole.Controller.EleveController">
    <top>
        <HBox spacing="10" alignment="CENTER">
            <Pane>
                <HBox.margin>
                    <Insets top="40" right="0" bottom="40" left="40"/>
                </HBox.margin>
            </Pane>

            <TextField fx:id="txtSearch" promptText="Rechercher un élève..." prefWidth="200"/>
            <Pane>
                <HBox.margin>
                    <Insets top="40" right="0" bottom="40" left="250"/>
                </HBox.margin>
            </Pane>
            <ComboBox fx:id="comboAnnee" promptText="Année scolaire" prefWidth="150"/>
            <ComboBox fx:id="comboClasse" promptText="Classe" prefWidth="150"/>
            <Button text="+" fx:id="btnNewEleve" onAction="#openEleveView"/>
            <Pane HBox.hgrow="ALWAYS"/>
        </HBox>
    </top>
    <center>
        <StackPane fx:id="contentArea">
            <HBox alignment="CENTER">

                <TableView fx:id="eleves" styleClass="table-view" prefHeight="250">
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                    </columnResizePolicy>
                    <columns>
                        <TableColumn fx:id="selectColumn" text=" " prefWidth="30"/>
                        <TableColumn fx:id="idEleve" text="Matricule" prefWidth="160"/>
                        <TableColumn fx:id="nomEleve" text="Nom" prefWidth="150"/>
                        <TableColumn fx:id="prenomEleve" text="Prenom" prefWidth="150"/>
                        <TableColumn fx:id="adresseEleve" text="Adresse" prefWidth="150"/>
                        <TableColumn fx:id="datenaiss" text="Date de naissance" prefWidth="150"/>
                        <TableColumn fx:id="genreEleve" text="Sex" prefWidth="80"/>
                    </columns>
                </TableView>
            </HBox>
            <AnchorPane fx:id="formOverlay" visible="false" opacity="0"
                        style="-fx-background-color: rgba(0,0,0,0.5);">

                <VBox alignment="CENTER" spacing="10"
                      prefWidth="600" prefHeight="450"
                      style="-fx-background-color: white; -fx-padding:20;"
                      AnchorPane.topAnchor="50" AnchorPane.leftAnchor="100" AnchorPane.rightAnchor="100">

                    <Label text="Créer un élève" style="-fx-font-size: 20; -fx-font-weight: bold;"/>

                    <ScrollPane fitToWidth="true" prefHeight="400">
                        <VBox spacing="15">

                            <TitledPane text="Informations Générales" expanded="true">
                                <GridPane hgap="10" vgap="10">
                                    <Label text="Classe:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                    <ComboBox fx:id="comboClasse2" promptText="Choisir une classe" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                    <Label text="Année Scolaire:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtAnneeScolaire" promptText="2024-2025" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                                    <Label text="Nom:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtNom" promptText="RAKOTO" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                                    <Label text="Prénom:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtPrenom" promptText="Randria" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                                    <Label text="Date Naissance:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                                    <DatePicker fx:id="txtdateNaissance" GridPane.rowIndex="5" promptText="01-01-2000" GridPane.columnIndex="1"/>

                                    <Label text="Sexe:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                                    <ComboBox fx:id="comboSexe" promptText="Choisir" GridPane.rowIndex="6" GridPane.columnIndex="1">
                                        <items>
                                            <FXCollections fx:factory="observableArrayList">
                                                <String fx:value="Fille"/>
                                                <String fx:value="Garçon"/>
                                            </FXCollections>
                                        </items>
                                    </ComboBox>

                                    <Label text="Adresse:" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtAdresse" GridPane.rowIndex="7" GridPane.columnIndex="1" promptText="Adresse"/>
                                    <Label text="Passant:" GridPane.rowIndex="8" GridPane.columnIndex="0"/>
                                    <HBox spacing="10" GridPane.rowIndex="8" GridPane.columnIndex="1">
                                        <RadioButton fx:id="passantOui" text="Oui" toggleGroup="$passantGroup"/>
                                        <RadioButton fx:id="passantNon" text="Non" toggleGroup="$passantGroup"/>
                                    </HBox>
                                    <Label text="Examen National:" GridPane.rowIndex="9" GridPane.columnIndex="0"/>
                                    <HBox spacing="10" GridPane.rowIndex="9" GridPane.columnIndex="1">
                                        <RadioButton fx:id="nationalOui" text="Oui" toggleGroup="$nationalGroup"/>
                                        <RadioButton fx:id="nationalNon" text="Non" toggleGroup="$nationalGroup"/>
                                    </HBox>
                                    <Label text="Handicap:" GridPane.rowIndex="10" GridPane.columnIndex="0"/>
                                    <ComboBox GridPane.rowIndex="10" GridPane.columnIndex="1" fx:id="comboHandicap" promptText="Choisir">
                                        <items>
                                            <FXCollections fx:factory="observableArrayList">
                                                <String fx:value="Audition"/>
                                                <String fx:value="Vision"/>
                                                <String fx:value="Intelectuel"/>
                                                <String fx:value="Psychomoteur"/>
                                            </FXCollections>
                                        </items>
                                    </ComboBox>
                                </GridPane>
                            </TitledPane>

                            <!-- Section Parents -->
                            <TitledPane text="Informations Parents" expanded="false">
                                <GridPane hgap="10" vgap="10">
                                    <Label text="Nom Père:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtNomPere" promptText="Nom du père" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                                    <Label text="Profession Père:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtProfessionPere" GridPane.rowIndex="1" GridPane.columnIndex="1" promptText="Profession Père"/>

                                    <Label text="Nom Mère:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtNomMere" GridPane.rowIndex="2" GridPane.columnIndex="1" promptText="Nom Mère"/>

                                    <Label text="Profession Mère:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtProfessionMere" GridPane.rowIndex="3" GridPane.columnIndex="1" promptText="Profession Mère"/>

                                    <Label text="Tuteur:" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                                    <TextField fx:id="txtTuteur" GridPane.rowIndex="4" GridPane.columnIndex="1" promptText="Nom du Tuteur"/>
                                    <Label text="Profession Tuteur:" GridPane.columnIndex="0" GridPane.rowIndex="5"/>
                                    <TextField fx:id="txtTuteurProfession" GridPane.rowIndex="5" GridPane.columnIndex="1" promptText="Profession Tuteur"/>
                                    <Label text="Contact:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtContact" GridPane.rowIndex="6" GridPane.columnIndex="1" promptText="Contact Parents"/>
                                    <Label text="Email:" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                                    <TextField fx:id="txtEmail" GridPane.rowIndex="7" GridPane.columnIndex="1" promptText="email@gmail.com"/>
                                </GridPane>
                            </TitledPane>
                        </VBox>
                    </ScrollPane>

                    <!-- Boutons -->
                    <HBox spacing="10" alignment="CENTER_RIGHT">
                        <Button text="Annuler" onAction="#handleCancel"/>
                        <Button text="Enregistrer" onAction="#handleSave"/>
                    </HBox>

                </VBox>
            </AnchorPane>

        </StackPane>
    </center>
    <right>
        <TitledPane text="Détails de l'élève" expanded="false" minWidth="360">
            <TabPane tabClosingPolicy="UNAVAILABLE">
                <!-- Onglet Infos Générales -->
                <Tab text="Infos Générales">
                    <ScrollPane fitToWidth="true" fitToHeight="true">
                        <GridPane fx:id="detailsPane" hgap="15" vgap="10">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="Numéro:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <Label fx:id="lblNum" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <Label text="Nom:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <Label fx:id="lblNom" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <Label text="Prénom:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <Label fx:id="lblPrenom" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                            <Label text="Adresse:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                            <Label fx:id="lblAdresse" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                            <Label text="Date Naissance:" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                            <Label fx:id="lblDateNaiss" GridPane.rowIndex="4" GridPane.columnIndex="1"/>

                            <Label text="Sexe:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                            <Label fx:id="lblSexe" GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                            <Label text = "Handicap:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                            <Label fx:id="lblHandicap" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
                            <Label text="Statut:" GridPane.rowIndex="9" GridPane.columnIndex="0"/>
                            <Label fx:id="lblIspassant" GridPane.rowIndex="9" GridPane.columnIndex="1"/>
                            <Label text="Examen National:" GridPane.rowIndex="10" GridPane.columnIndex="0"/>
                            <Label fx:id="lblExamenNational" GridPane.rowIndex="10" GridPane.columnIndex="1"/>
                            <Label text="Classe:" GridPane.rowIndex="13" GridPane.columnIndex="0"/>
                            <Label fx:id="lblClasse" GridPane.rowIndex="13" GridPane.columnIndex="1"/>
                            <Label text="Annee Scolaire" GridPane.rowIndex="14" GridPane.columnIndex="0"/>
                            <Label fx:id="lblAnneScolaire" GridPane.rowIndex="14" GridPane.columnIndex="1"/>
                        </GridPane>
                    </ScrollPane>
                </Tab>

                <!-- Onglet Tuteur -->
                <Tab text="Tuteur">
                    <ScrollPane fitToWidth="true" fitToHeight="true">
                        <GridPane fx:id="detailsTuteurPane" hgap="15" vgap="10">
                            <padding>
                                <Insets top="10" right="10" bottom="10" left="10"/>
                            </padding>
                            <Label text="Nom Pere:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <Label fx:id="lblNomPere" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                            <Label text="Profession:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <Label fx:id="lblProfessionPere" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                            <Label text="Nom Mere:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <Label fx:id="lblNomMere" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                            <Label text="Profession:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                            <Label fx:id="lblProfessionMere" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                            <Label text="Nom Tuteur:" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                            <Label fx:id="lblTuteurNom" GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                            <Label text="Profession:" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                            <Label fx:id="lblProfessionTuteur" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
                            <Label text="Contact Tuteur:" GridPane.rowIndex="8" GridPane.columnIndex="0"/>
                            <Label fx:id="lblTuteurTel" GridPane.rowIndex="8" GridPane.columnIndex="1"/>
                            <Label text="Email Tuteur:" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                            <Label fx:id="lblTuteurEmail" GridPane.rowIndex="7" GridPane.columnIndex="1"/>
                        </GridPane>
                    </ScrollPane>
                </Tab>

                <!-- Onglet Attitude -->
                <Tab text="Attitude">
                    <HBox alignment="CENTER">
                        <TableView fx:id="attitudes" styleClass="table-view">
                            <columnResizePolicy>
                                <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                            </columnResizePolicy>
                            <columns>
                                <TableColumn fx:id="dateattitudeColumn" text="Date" prefWidth="100"/>
                                <TableColumn fx:id="participationColumn" text="Participation" prefWidth="100"/>
                                <TableColumn fx:id="comportementColumn" text="Comportement" prefWidth="100"/>
                                <TableColumn fx:id="retardColumn" text="Retard" prefWidth="80"/>
                            </columns>
                        </TableView>
                    </HBox>
                </Tab>

                <!-- Onglet Notes -->
                <Tab text="Notes">
                    <VBox>
                        <HBox>
                            <Pane>
                                <HBox.margin>
                                    <Insets top="5" right="0" bottom="5" left="50"/>
                                </HBox.margin>
                            </Pane>
                            <Label text="Bulletin de note" styleClass="labelEntete"/>
                            <Pane>
                                <HBox.margin>
                                    <Insets top="5" right="0" bottom="5" left="120"/>
                                </HBox.margin>
                            </Pane>
                            <ComboBox fx:id="comboNote" promptText="Note du mois" prefWidth="150"/>
                        </HBox>
                        <TableView fx:id="notes" styleClass="table-view">
                            <columns>
                                <TableColumn fx:id="matiereColumn" text="Matière" prefWidth="120"/>
                                <TableColumn fx:id="coefficientColumn" text="Coeff" prefWidth="60"/>
                                <TableColumn fx:id="noteColumn" text="Note" prefWidth="80"/>
                                <TableColumn fx:id="commentaireColumn" text="Commentaire" prefWidth="160"/>
                            </columns>
                        </TableView>
                        <GridPane hgap="15" vgap="10" styleClass="labelEntete">
                            <Label text="Total:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <Label fx:id="lblTotalNote" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                            <Label text="Moyenne:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                            <Label fx:id="lblMoyenne" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                            <Label text="Mention" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                            <Label fx:id="lblMention" GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                            <Label text=" " GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                        </GridPane>
                    </VBox>
                </Tab>
                <Tab text="Ecolage">
                    <VBox>
                        <Label text="Ecolage payer" styleClass="labelEntete"/>
                        <TableView fx:id="ecolages" styleClass="table-view">
                            <columns>
                                <TableColumn fx:id="dateEcolageColumn" text="Ecolage moi" prefWidth="150"/>
                                <TableColumn fx:id="statutPayerColumn" text="Statut" prefWidth="100"/>
                            </columns>
                        </TableView>
                    </VBox>
                </Tab>
            </TabPane>
        </TitledPane>
    </right>
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="15">
            <Pane>
                <HBox.margin>
                    <Insets top="40" right="0" bottom="40" left="320"/>
                </HBox.margin>
            </Pane>
            <Button text="Ajouter" fx:id="btnAjouter"/>
            <Button text="Modifier" fx:id="btnModifier"/>
        </HBox>
    </bottom>
</BorderPane>

<?light.gestion_ecole.Controller.MainController ?>